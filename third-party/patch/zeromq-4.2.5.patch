diff -Naur zeromq-4.2.5/builds/cmake/clang-format-check.sh.in zeromq-4.2.5-mod/builds/cmake/clang-format-check.sh.in
--- zeromq-4.2.5/builds/cmake/clang-format-check.sh.in  1970-01-01 08:00:00.000000000 +0800
+++ zeromq-4.2.5-mod/builds/cmake/clang-format-check.sh.in      2021-07-10 15:41:36.529956955 +0800
@@ -0,0 +1,14 @@
+#!/bin/sh
+FAILED=0
+IFS=";"
+FILES="@ALL_SOURCE_FILES@"
+IDS=$(echo -en "\n\b")
+for FILE in $FILES
+do
+    @CLANG_FORMAT@ -style=file -output-replacements-xml "$FILE" | grep "<replacement " >/dev/null &&
+    {
+      echo "$FILE is not correctly formatted"
+      FAILED=1
+    }
+done
+if [ "$FAILED" -eq "1" ] ; then exit 1 ; fi
